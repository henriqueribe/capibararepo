<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Controle de Turma</title>
  <link rel="stylesheet" href="turmas.css">
</head>

<body>
  <header>
    <a href="C:\Users\User\Downloads\sprints\1129\capibararepo-main\index.html">PÃ¡gina inicial</a>
    <h1>CONTROLE DE TURMA</h1>
    <nav>
      <ul>
        <li>Luis Bicalho</li>
        <li><a href="#">Sair-></a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="turmas">
      <h2>SUAS TURMAS:</h2>
      <div class="turmas-container">
        <!-- as turmas vem p ca se deus permitir -->
      </div>
    </section>
  </main>

  <script>
    // id que eu vo salva em cache de alguma forma que so deus sabe
    const professorId = '6567a51d5ac82e973ea8bff3';

    function fetchTurmas() {
      // link pro servidor real quando o daniel largar de ser otario (melhorar da dengue
      fetch(`http://localhost:4000/api/professor/${professorId}`)
        .then(response => {
          if (!response.ok) {
            throw new Error(`Erro HTTP! status: ${response.status}`);
          }
          return response.json();
        })
        .then(professor => {
          const turmasContainer = document.querySelector('.turmas-container');
          const turmas = professor.turmas
          turmasContainer.innerHTML = ''; // limpa qq coisa que esteja por ai i hope
          turmas.forEach(turma_id => {
            const turmaDiv = document.createElement('div');
            fetch(`http://localhost:4000/api/turma/${turma_id}`)
              .then((response) => {
                return response.json()
              })
              .then((data) => {
                const turma = data
                console.log(turma)
                turmaDiv.className = 'turma';
                turmaDiv.innerHTML = `
                <h3>TURMA ${turma.nome}</h3>
                <p>SALA ${turma.sala}</p>
              `;
                turmasContainer.appendChild(turmaDiv);
              })
          });
        })
        .catch(error => {
          console.error('Erro ao buscar turmas:', error);
        });
    }

    // carrega as turmas quando a pagina e carregada probably
    document.addEventListener('DOMContentLoaded', fetchTurmas);
  </script>
</body>

</html>